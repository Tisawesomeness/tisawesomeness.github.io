---
layout: post
title: "Minecraft 1.21.11-pre1"
date: 2025-11-20 16:49:26 -0400
changelog: "https://www.minecraft.net/en-us/article/minecraft-1-21-11-pre-release-1"
---

The first 1.21.11 pre-release is out, starting to polish the Mounts of Mayhem features.

## Nautilus

Nautilus shell drop chances are now affected by looting:

| Level       | Chance |
| ----------- | ------ |
| None        | 5%     |
| Looting I   | 6%     |
| Looting II  | 7%     |
| Looting III | 8%     |

## Spear

The hitbox margin for jab attacks was decreased from 0.25 blocks to 0.125 blocks.

### Mob Usage

A mob wielding a spear charges at its target, retreats, then repeats until the spear use time runs out, then it flees to a far location. The distances the mob runs away to when retreating and fleeing have changed:

When retreating:

|            | Before             | After              |
| ---------- | ------------------ | ------------------ |
| Not Riding | 6 to 12.728 blocks | 6 to 9.899 blocks  |
| Riding     | 6 to 12.728 blocks | 8 to 12.728 blocks |

When fleeing:

|            | Before             | After              |
| ---------- | ------------------ | ------------------ |
| Not Riding | 0 to 19.799 blocks | 0 to 15.556 blocks |
| Riding     | 0 to 19.799 blocks | 0 to 18.385 blocks |

<details>

<summary>How the retreat/flee position is selected</summary>

<p>To choose a block to run away to, the mob will try to generate 10 candidate blocks using the below procedure, then pathfind to the block with the lowest pathfinding cost. If the mob cannot find a block, it tries again on the next tick.</p>

<p>First, the mob will look directly opposite from the player horizontally and pick a random angle up to 90 degrees to the left or right. Then, it picks a random radius between a minimum and maximum (with probability proportional to the radius' square root), and rejects any blocks outside a grid-aligned square of a certain size, as shown by the formulas below:</p>

<p>For retreating while not riding (or after a failed flee attempt):</p>
$$ \begin{gather}
(6 - \text{distance})\sqrt{2} & \leq & \text{radius} & \leq & (7 - \text{distance})\sqrt{2} \\
-7 & \leq & x,z & \leq & 7
\end{gather} $$

<p>For retreating while riding (or after a failed flee attempt):</p>
$$ \begin{gather}
(8 - \text{distance})\sqrt{2} & \leq & \text{radius} & \leq & (9 - \text{distance})\sqrt{2} \\
-9 & \leq & x,z & \leq & 9
\end{gather} $$

<p>For fleeing while not riding:</p>
$$ \begin{gather}
\max(0, 9 - \text{distance})\sqrt{2} & \leq & \text{radius} & \leq & \max(1, 11 - \text{distance})\sqrt{2} \\
-\max(1, 11 - \text{distance}) & \leq & x,z & \leq & \max(1, 11 - \text{distance})
\end{gather} $$

<p>For fleeing while riding:</p>
$$ \begin{gather}
\max(0, 11 - \text{distance})\sqrt{2} & \leq & \text{radius} & \leq & \max(1, 13 - \text{distance})\sqrt{2} \\
-\max(1, 13 - \text{distance}) & \leq & x,z & \leq & \max(1, 13 - \text{distance})
\end{gather} $$

<p>Where <code>distance</code> is the mob's horizontal distance to the player, <code>radius</code> is the randomly chosen radius, and <code>x, z</code> are the X-offset and Z-offset from the mob's position.</p>

<p>Then, the mob picks a random y-offset within -7 and +7 blocks to determine the chosen block. The chosen block must be a full occlusion block and within the build height.</p>

<p>If the chosen block is a solid block, then the mob checks blocks above until it finds a block that is not solid. If that block is water, it is rejected.</p>

</details>

Piglins now use the following memories when wielding a spear. They are not persistent and will reset when unloaded.

| Memory                   | Type                              |
| ------------------------ | --------------------------------- |
| `spear_fleeing_time`     | Integer                           |
| `spear_fleeing_position` | List of 3 Doubles                 |
| `spear_charge_position`  | List of 3 Doubles                 |
| `spear_engage_time`      | Integer                           |
| `spear_status`           | `approach`, `charging`, `retreat` |

## World Generation

Mobs no longer spawn during chunk generation when the `spawn_mobs` gamerule is false.

